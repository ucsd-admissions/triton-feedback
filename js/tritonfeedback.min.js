!function(e){"use strict";e.module("ng.deviceDetector",[]).constant("BROWSERS",{CHROME:"chrome",FIREFOX:"firefox",SAFARI:"safari",OPERA:"opera",IE:"ie",PS4:"ps4",VITA:"vita",UNKNOWN:"unknown"}).constant("DEVICES",{ANDROID:"android",IPAD:"ipad",IPHONE:"iphone",IPOD:"ipod",BLACKBERRY:"blackberry",FIREFOXOS:"firefoxos",WINDOWSPHONE:"windows-phone",PS4:"ps4",VITA:"vita",UNKNOWN:"unknown"}).constant("OS",{WINDOWS:"windows",MAC:"mac",IOS:"ios",ANDROID:"android",LINUX:"linux",UNIX:"unix",FIREFOXOS:"firefoxos",WINDOWSPHONE:"windows-phone",PS4:"ps4",VITA:"vita",UNKNOWN:"unknown"}).service("detectUtils",["deviceDetector","DEVICES","BROWSERS","OS",function(e,t,r,o){var i=e;this.isMobile=function(){return"unknown"!==i.device},this.isAndroid=function(){return i.device===t.ANDROID||i.OS===o.ANDROID},this.isIOS=function(){return i.os===o.IOS||i.device===t.IPOD||i.device===t.IPHONE}}]).factory("deviceDetector",["$window","DEVICES","BROWSERS","OS",function(e,t,r,o){var i=e.navigator.userAgent,n={raw:{userAgent:i,os:{},browser:{},device:{}}};return n.raw.os[o.WINDOWS]=/\bWindows\b/.test(i)&&!/\bWindows Phone\b/.test(i),n.raw.os[o.MAC]=/\bMac OS\b/.test(i),n.raw.os[o.IOS]=/\biPad\b/.test(i)||/\biPhone\b/.test(i)||/\biPod\b/.test(i),n.raw.os[o.ANDROID]=/\bAndroid\b/.test(i),n.raw.os[o.LINUX]=/\bLinux\b/.test(i),n.raw.os[o.UNIX]=/\bUNIX\b/.test(i),n.raw.os[o.FIREFOXOS]=/\bFirefox\b/.test(i)&&/\Mobile\b/.test(i),n.raw.os[o.WINDOWSPHONE]=/\bIEMobile\b/.test(i),n.raw.os[o.PS4]=/\bMozilla\/5.0 \(PlayStation 4\b/.test(i),n.raw.os[o.VITA]=/\bMozilla\/5.0 \(Play(S|s)tation Vita\b/.test(i),n.raw.browser[r.CHROME]=/\bChrome\b/.test(i)||/\bCriOS\b/.test(i),n.raw.browser[r.FIREFOX]=/\Firefox\b/.test(i),n.raw.browser[r.SAFARI]=/^((?!CriOS).)*\Safari\b.*$/.test(i),n.raw.browser[r.OPERA]=/\Opera\b/.test(i),n.raw.browser[r.IE]=/\bMSIE\b/.test(i)||/\Trident\b/.test(i),n.raw.browser[r.PS4]=/\bMozilla\/5.0 \(PlayStation 4\b/.test(i),n.raw.browser[r.VITA]=/\bMozilla\/5.0 \(Play(S|s)tation Vita\b/.test(i),n.raw.device[t.ANDROID]=/\bAndroid\b/.test(i),n.raw.device[t.IPAD]=/\biPad\b/.test(i),n.raw.device[t.IPHONE]=/\biPhone\b/.test(i),n.raw.device[t.IPOD]=/\biPod\b/.test(i),n.raw.device[t.BLACKBERRY]=/\bblackberry\b/.test(i),n.raw.device[t.FIREFOXOS]=/\bFirefox\b/.test(i)&&/\Mobile\b/.test(i),n.raw.device[t.WINDOWSPHONE]=/\bIEMobile\b/.test(i),n.raw.device[t.PS4]=/\bMozilla\/5.0 \(PlayStation 4\b/.test(i),n.raw.device[t.VITA]=/\bMozilla\/5.0 \(Play(S|s)tation Vita\b/.test(i),n.os=[o.WINDOWS,o.IOS,o.MAC,o.ANDROID,o.LINUX,o.UNIX,o.FIREFOXOS,o.WINDOWSPHONE,o.PS4,o.VITA].reduce(function(e,t){return e===o.UNKNOWN&&n.raw.os[t]?t:e},o.UNKNOWN),n.browser=[r.CHROME,r.FIREFOX,r.SAFARI,r.OPERA,r.IE,r.PS4,r.VITA].reduce(function(e,t){return e===r.UNKNOWN&&n.raw.browser[t]?t:e},r.UNKNOWN),n.device=[t.ANDROID,t.IPAD,t.IPHONE,t.IPOD,t.BLACKBERRY,t.FIREFOXOS,t.WINDOWSPHONE,t.PS4,t.VITA].reduce(function(e,r){return e===t.UNKNOWN&&n.raw.device[r]?r:e},t.UNKNOWN),n.isMobile=function(){return[t.ANDROID,t.IPAD,t.IPHONE,t.IPOD,t.BLACKBERRY,t.FIREFOXOS,t.WINDOWSPHONE,t.VITA].some(function(e){return n.device==e})},n.isTablet=function(){return[t.IPAD,t.FIREFOXOS].some(function(e){return n.device==e})},n.isDesktop=function(){return[t.PS4,t.UNKNOWN].some(function(e){return n.device==e})},n}]).directive("deviceDetector",["deviceDetector",function(e){return{restrict:"A",link:function(t,r){r.addClass("os-"+e.os),r.addClass("browser-"+e.browser),r.addClass("device-"+e.device)}}}])}(angular),angular.module("tritonFeedback",["ngCookies","ng.deviceDetector","firebase"]),angular.module("tritonFeedback").controller("mainCtrl",["$scope","$cookies","getTritonFeedbackData","deviceDetector","$firebase",function(e,t,r,o){"use strict";var i=r;e.visible=!1,e.env={browser:o.browser,device:o.device,os:o.os},e.path=window.location.pathname,e.error=!1,e.fb,e.feedback={},this.connect=function(){var t=new Firebase("https://"+i.firebase+".firebaseio.com/");return t?t:void(e.error=!0)},e.getTemplate=function(){var e=t.triton_feedback_access;return e?i.templateUrl:""},e.open=function(){e.visible=!0,angular.element(document.getElementsByTagName("body")).css("overflow","hidden")},e.close=function(){e.visible=!1,angular.element(document.getElementsByTagName("body")).css("overflow","")},e.submitFeedback=function(){var r=e.fb.child("tickets");r.push({time:(new Date).getTime(),session:t.triton_feedback_session,browser:e.env.browser,device:e.env.device,os:e.env.os,path:e.path,message:e.feedback.message},e.pushed)},e.pushed=function(t){e.$apply(t?function(){e.error=!0}:function(){e.feedback={}})},e.fb=this.connect()}]),angular.module("tritonFeedback").factory("getTritonFeedbackData",function(){"use strict";return this.defaultObject={templateUrl:"wp-content/plugins/triton-feedback/src/template.html"},"undefined"==typeof tritonFeedbackData?this.defaultObject:tritonFeedbackData}),angular.bootstrap(document.getElementById("triton-feedback"),["tritonFeedback"]);